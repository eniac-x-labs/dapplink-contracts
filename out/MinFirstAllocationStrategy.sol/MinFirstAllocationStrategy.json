{"abi":[],"bytecode":{"object":"0x60808060405234601757603a9081601d823930815050f35b600080fdfe600080fdfea264697066735822122002a9133a0a26c4355f2d2efed16829a81e0a6b62ab0477c2aab04dec24841ac664736f6c63430008180033","sourceMap":"422:5243:126:-:0;;;;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x600080fdfea264697066735822122002a9133a0a26c4355f2d2efed16829a81e0a6b62ab0477c2aab04dec24841ac664736f6c63430008180033","sourceMap":"422:5243:126:-:0;;","linkReferences":{}},"methodIdentifiers":{},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.24+commit.e11b9ed9\"},\"language\":\"Solidity\",\"output\":{\"abi\":[],\"devdoc\":{\"details\":\"The current implementation favors buckets with the least fill factor\",\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"notice\":\"Library with methods to calculate \\\"proportional\\\" allocations among buckets with different     capacity and level of filling.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/contracts/libraries/MinFirstAllocationStrategy.sol\":\"MinFirstAllocationStrategy\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@/=src/\",\":@openzeppelin-upgrades/=lib/openzeppelin-contracts-upgradeable/\",\":@openzeppelin/=lib/openzeppelin-contracts/\",\":@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\"],\"viaIR\":true},\"sources\":{\"src/contracts/libraries/Math256.sol\":{\"keccak256\":\"0xd5382b0c2b0bdfb1834a9bda3cdc66a50fb7d3f6a1cc109553a6e02218d7ff71\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://3c3fadef5d48806c0313858310cf3c1763d8dd53282e51363c431c5f4e7765a9\",\"dweb:/ipfs/QmNpbDL1XmHzUsYMgE8RKAn7qudxqsE6f4f3twnuhAYGa1\"]},\"src/contracts/libraries/MinFirstAllocationStrategy.sol\":{\"keccak256\":\"0x37b11bc7300d9fcb4ab52e3d334a4614a6abd6c74817147fd86d8bd5572a35d1\",\"license\":\"GPL-3.0\",\"urls\":[\"bzz-raw://115793463cf55507639d624ffde64a2181d5cb0c1d44a6c31b68eee8a4b3e585\",\"dweb:/ipfs/Qma7jMU7LY2VcMDoH8pnoLg5fssDH19iNJWD9QYYsaVcej\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.24+commit.e11b9ed9"},"language":"Solidity","output":{"abi":[],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@/=src/","@openzeppelin-upgrades/=lib/openzeppelin-contracts-upgradeable/","@openzeppelin/=lib/openzeppelin-contracts/","@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/","@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/contracts/libraries/MinFirstAllocationStrategy.sol":"MinFirstAllocationStrategy"},"evmVersion":"paris","libraries":{},"viaIR":true},"sources":{"src/contracts/libraries/Math256.sol":{"keccak256":"0xd5382b0c2b0bdfb1834a9bda3cdc66a50fb7d3f6a1cc109553a6e02218d7ff71","urls":["bzz-raw://3c3fadef5d48806c0313858310cf3c1763d8dd53282e51363c431c5f4e7765a9","dweb:/ipfs/QmNpbDL1XmHzUsYMgE8RKAn7qudxqsE6f4f3twnuhAYGa1"],"license":"MIT"},"src/contracts/libraries/MinFirstAllocationStrategy.sol":{"keccak256":"0x37b11bc7300d9fcb4ab52e3d334a4614a6abd6c74817147fd86d8bd5572a35d1","urls":["bzz-raw://115793463cf55507639d624ffde64a2181d5cb0c1d44a6c31b68eee8a4b3e585","dweb:/ipfs/Qma7jMU7LY2VcMDoH8pnoLg5fssDH19iNJWD9QYYsaVcej"],"license":"GPL-3.0"}},"version":1},"ast":{"absolutePath":"src/contracts/libraries/MinFirstAllocationStrategy.sol","id":70368,"exportedSymbols":{"Math256":[69790],"MinFirstAllocationStrategy":[70367]},"nodeType":"SourceUnit","src":"122:5543:126","nodes":[{"id":70138,"nodeType":"PragmaDirective","src":"122:32:126","nodes":[],"literals":["solidity",">=","0.4",".24","<","0.9",".0"]},{"id":70140,"nodeType":"ImportDirective","src":"158:38:126","nodes":[],"absolutePath":"src/contracts/libraries/Math256.sol","file":"./Math256.sol","nameLocation":"-1:-1:-1","scope":70368,"sourceUnit":69791,"symbolAliases":[{"foreign":{"id":70139,"name":"Math256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":69790,"src":"166:7:126","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":70367,"nodeType":"ContractDefinition","src":"422:5243:126","nodes":[{"id":70148,"nodeType":"VariableDeclaration","src":"464:49:126","nodes":[],"constant":true,"mutability":"constant","name":"MAX_UINT256","nameLocation":"489:11:126","scope":70367,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70142,"name":"uint256","nodeType":"ElementaryTypeName","src":"464:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"commonType":{"typeIdentifier":"t_rational_115792089237316195423570985008687907853269984665640564039457584007913129639935_by_1","typeString":"int_const 1157...(70 digits omitted)...9935"},"id":70147,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_rational_115792089237316195423570985008687907853269984665640564039457584007913129639936_by_1","typeString":"int_const 1157...(70 digits omitted)...9936"},"id":70145,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"leftExpression":{"hexValue":"32","id":70143,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"503:1:126","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"hexValue":"323536","id":70144,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"506:3:126","typeDescriptions":{"typeIdentifier":"t_rational_256_by_1","typeString":"int_const 256"},"value":"256"},"src":"503:6:126","typeDescriptions":{"typeIdentifier":"t_rational_115792089237316195423570985008687907853269984665640564039457584007913129639936_by_1","typeString":"int_const 1157...(70 digits omitted)...9936"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"hexValue":"31","id":70146,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"512:1:126","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"503:10:126","typeDescriptions":{"typeIdentifier":"t_rational_115792089237316195423570985008687907853269984665640564039457584007913129639935_by_1","typeString":"int_const 1157...(70 digits omitted)...9935"}},"visibility":"private"},{"id":70192,"nodeType":"FunctionDefinition","src":"1951:540:126","nodes":[],"body":{"id":70191,"nodeType":"Block","src":"2124:367:126","nodes":[],"statements":[{"assignments":[70163],"declarations":[{"constant":false,"id":70163,"mutability":"mutable","name":"allocatedToBestCandidate","nameLocation":"2143:24:126","nodeType":"VariableDeclaration","scope":70191,"src":"2135:32:126","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70162,"name":"uint256","nodeType":"ElementaryTypeName","src":"2135:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":70165,"initialValue":{"hexValue":"30","id":70164,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2170:1:126","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"2135:36:126"},{"body":{"id":70189,"nodeType":"Block","src":"2217:267:126","statements":[{"expression":{"id":70177,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":70169,"name":"allocatedToBestCandidate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70163,"src":"2232:24:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":70171,"name":"buckets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70152,"src":"2283:7:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},{"id":70172,"name":"capacities","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70155,"src":"2292:10:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70175,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":70173,"name":"allocationSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70157,"src":"2304:14:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":70174,"name":"allocated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70160,"src":"2321:9:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2304:26:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"},{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":70170,"name":"allocateToBestCandidate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70366,"src":"2259:23:126","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_array$_t_uint256_$dyn_memory_ptr_$_t_array$_t_uint256_$dyn_memory_ptr_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256[] memory,uint256[] memory,uint256) pure returns (uint256)"}},"id":70176,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2259:72:126","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2232:99:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70178,"nodeType":"ExpressionStatement","src":"2232:99:126"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70181,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":70179,"name":"allocatedToBestCandidate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70163,"src":"2350:24:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":70180,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2378:1:126","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"2350:29:126","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":70184,"nodeType":"IfStatement","src":"2346:75:126","trueBody":{"id":70183,"nodeType":"Block","src":"2381:40:126","statements":[{"id":70182,"nodeType":"Break","src":"2400:5:126"}]}},{"expression":{"id":70187,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":70185,"name":"allocated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70160,"src":"2435:9:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":70186,"name":"allocatedToBestCandidate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70163,"src":"2448:24:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2435:37:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70188,"nodeType":"ExpressionStatement","src":"2435:37:126"}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70168,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":70166,"name":"allocated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70160,"src":"2189:9:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":70167,"name":"allocationSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70157,"src":"2201:14:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2189:26:126","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":70190,"nodeType":"WhileStatement","src":"2182:302:126"}]},"documentation":{"id":70149,"nodeType":"StructuredDocumentation","src":"522:1423:126","text":"@notice Allocates passed maxAllocationSize among the buckets. The resulting allocation doesn't exceed the\n     capacities of the buckets. An algorithm starts filling from the least populated buckets to equalize the fill factor.\n     For example, for buckets: [9998, 70, 0], capacities: [10000, 101, 100], and maxAllocationSize: 101, the allocation happens\n     following way:\n         1. top up the bucket with index 2 on 70. Intermediate state of the buckets: [9998, 70, 70]. According to the definition,\n            the rest allocation must be proportionally split among the buckets with the same values.\n         2. top up the bucket with index 1 on 15. Intermediate state of the buckets: [9998, 85, 70].\n         3. top up the bucket with index 2 on 15. Intermediate state of the buckets: [9998, 85, 85].\n         4. top up the bucket with index 1 on 1. Nothing to distribute. The final state of the buckets: [9998, 86, 85]\n @dev Method modifies the passed buckets array to reduce the gas costs on memory allocation.\n @param buckets The array of current allocations in the buckets\n @param capacities The array of capacities of the buckets\n @param allocationSize The desired value to allocate among the buckets\n @return allocated The total value allocated among the buckets. Can't exceed the allocationSize value"},"implemented":true,"kind":"function","modifiers":[],"name":"allocate","nameLocation":"1960:8:126","parameters":{"id":70158,"nodeType":"ParameterList","parameters":[{"constant":false,"id":70152,"mutability":"mutable","name":"buckets","nameLocation":"1996:7:126","nodeType":"VariableDeclaration","scope":70192,"src":"1979:24:126","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[]"},"typeName":{"baseType":{"id":70150,"name":"uint256","nodeType":"ElementaryTypeName","src":"1979:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70151,"nodeType":"ArrayTypeName","src":"1979:9:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_storage_ptr","typeString":"uint256[]"}},"visibility":"internal"},{"constant":false,"id":70155,"mutability":"mutable","name":"capacities","nameLocation":"2031:10:126","nodeType":"VariableDeclaration","scope":70192,"src":"2014:27:126","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[]"},"typeName":{"baseType":{"id":70153,"name":"uint256","nodeType":"ElementaryTypeName","src":"2014:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70154,"nodeType":"ArrayTypeName","src":"2014:9:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_storage_ptr","typeString":"uint256[]"}},"visibility":"internal"},{"constant":false,"id":70157,"mutability":"mutable","name":"allocationSize","nameLocation":"2060:14:126","nodeType":"VariableDeclaration","scope":70192,"src":"2052:22:126","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70156,"name":"uint256","nodeType":"ElementaryTypeName","src":"2052:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1968:113:126"},"returnParameters":{"id":70161,"nodeType":"ParameterList","parameters":[{"constant":false,"id":70160,"mutability":"mutable","name":"allocated","nameLocation":"2113:9:126","nodeType":"VariableDeclaration","scope":70192,"src":"2105:17:126","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70159,"name":"uint256","nodeType":"ElementaryTypeName","src":"2105:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2104:19:126"},"scope":70367,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":70366,"nodeType":"FunctionDefinition","src":"3912:1750:126","nodes":[],"body":{"id":70365,"nodeType":"Block","src":"4100:1562:126","nodes":[],"statements":[{"assignments":[70207],"declarations":[{"constant":false,"id":70207,"mutability":"mutable","name":"bestCandidateIndex","nameLocation":"4119:18:126","nodeType":"VariableDeclaration","scope":70365,"src":"4111:26:126","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70206,"name":"uint256","nodeType":"ElementaryTypeName","src":"4111:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":70210,"initialValue":{"expression":{"id":70208,"name":"buckets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70196,"src":"4140:7:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70209,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4148:6:126","memberName":"length","nodeType":"MemberAccess","src":"4140:14:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4111:43:126"},{"assignments":[70212],"declarations":[{"constant":false,"id":70212,"mutability":"mutable","name":"bestCandidateAllocation","nameLocation":"4173:23:126","nodeType":"VariableDeclaration","scope":70365,"src":"4165:31:126","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70211,"name":"uint256","nodeType":"ElementaryTypeName","src":"4165:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":70214,"initialValue":{"id":70213,"name":"MAX_UINT256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70148,"src":"4199:11:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4165:45:126"},{"assignments":[70216],"declarations":[{"constant":false,"id":70216,"mutability":"mutable","name":"bestCandidatesCount","nameLocation":"4229:19:126","nodeType":"VariableDeclaration","scope":70365,"src":"4221:27:126","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70215,"name":"uint256","nodeType":"ElementaryTypeName","src":"4221:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":70218,"initialValue":{"hexValue":"30","id":70217,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4251:1:126","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"4221:31:126"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70221,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":70219,"name":"allocationSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70201,"src":"4269:14:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":70220,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4287:1:126","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4269:19:126","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":70225,"nodeType":"IfStatement","src":"4265:60:126","trueBody":{"id":70224,"nodeType":"Block","src":"4290:35:126","statements":[{"expression":{"hexValue":"30","id":70222,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4312:1:126","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":70205,"id":70223,"nodeType":"Return","src":"4305:8:126"}]}},{"body":{"id":70279,"nodeType":"Block","src":"4382:412:126","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70243,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"baseExpression":{"id":70237,"name":"buckets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70196,"src":"4401:7:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70239,"indexExpression":{"id":70238,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70227,"src":"4409:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4401:10:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"baseExpression":{"id":70240,"name":"capacities","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70199,"src":"4415:10:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70242,"indexExpression":{"id":70241,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70227,"src":"4426:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4415:13:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4401:27:126","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70250,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":70246,"name":"bestCandidateAllocation","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70212,"src":"4483:23:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"baseExpression":{"id":70247,"name":"buckets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70196,"src":"4509:7:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70249,"indexExpression":{"id":70248,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70227,"src":"4517:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4509:10:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4483:36:126","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70270,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":70266,"name":"bestCandidateAllocation","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70212,"src":"4685:23:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"baseExpression":{"id":70267,"name":"buckets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70196,"src":"4712:7:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70269,"indexExpression":{"id":70268,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70227,"src":"4720:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4712:10:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4685:37:126","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":70276,"nodeType":"IfStatement","src":"4681:102:126","trueBody":{"id":70275,"nodeType":"Block","src":"4724:59:126","statements":[{"expression":{"id":70273,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":70271,"name":"bestCandidatesCount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70216,"src":"4743:19:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"hexValue":"31","id":70272,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4766:1:126","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"4743:24:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70274,"nodeType":"ExpressionStatement","src":"4743:24:126"}]}},"id":70277,"nodeType":"IfStatement","src":"4479:304:126","trueBody":{"id":70265,"nodeType":"Block","src":"4521:154:126","statements":[{"expression":{"id":70253,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":70251,"name":"bestCandidateIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70207,"src":"4540:18:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":70252,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70227,"src":"4561:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4540:22:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70254,"nodeType":"ExpressionStatement","src":"4540:22:126"},{"expression":{"id":70257,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":70255,"name":"bestCandidatesCount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70216,"src":"4581:19:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"31","id":70256,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4603:1:126","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"4581:23:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70258,"nodeType":"ExpressionStatement","src":"4581:23:126"},{"expression":{"id":70263,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":70259,"name":"bestCandidateAllocation","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70212,"src":"4623:23:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"baseExpression":{"id":70260,"name":"buckets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70196,"src":"4649:7:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70262,"indexExpression":{"id":70261,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70227,"src":"4657:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4649:10:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4623:36:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70264,"nodeType":"ExpressionStatement","src":"4623:36:126"}]}},"id":70278,"nodeType":"IfStatement","src":"4397:386:126","trueBody":{"id":70245,"nodeType":"Block","src":"4430:43:126","statements":[{"id":70244,"nodeType":"Continue","src":"4449:8:126"}]}}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70233,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":70230,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70227,"src":"4357:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"expression":{"id":70231,"name":"buckets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70196,"src":"4361:7:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70232,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4369:6:126","memberName":"length","nodeType":"MemberAccess","src":"4361:14:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4357:18:126","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":70280,"initializationExpression":{"assignments":[70227],"declarations":[{"constant":false,"id":70227,"mutability":"mutable","name":"i","nameLocation":"4350:1:126","nodeType":"VariableDeclaration","scope":70280,"src":"4342:9:126","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70226,"name":"uint256","nodeType":"ElementaryTypeName","src":"4342:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":70229,"initialValue":{"hexValue":"30","id":70228,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4354:1:126","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"4342:13:126"},"isSimpleCounterLoop":true,"loopExpression":{"expression":{"id":70235,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"++","prefix":true,"src":"4377:3:126","subExpression":{"id":70234,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70227,"src":"4379:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70236,"nodeType":"ExpressionStatement","src":"4377:3:126"},"nodeType":"ForStatement","src":"4337:457:126"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70283,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":70281,"name":"bestCandidatesCount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70216,"src":"4810:19:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":70282,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4833:1:126","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4810:24:126","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":70287,"nodeType":"IfStatement","src":"4806:65:126","trueBody":{"id":70286,"nodeType":"Block","src":"4836:35:126","statements":[{"expression":{"hexValue":"30","id":70284,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4858:1:126","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":70205,"id":70285,"nodeType":"Return","src":"4851:8:126"}]}},{"assignments":[70289],"declarations":[{"constant":false,"id":70289,"mutability":"mutable","name":"allocationSizeUpperBound","nameLocation":"4980:24:126","nodeType":"VariableDeclaration","scope":70365,"src":"4972:32:126","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70288,"name":"uint256","nodeType":"ElementaryTypeName","src":"4972:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":70291,"initialValue":{"id":70290,"name":"MAX_UINT256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70148,"src":"5007:11:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4972:46:126"},{"body":{"id":70332,"nodeType":"Block","src":"5074:263:126","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70309,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"baseExpression":{"id":70303,"name":"buckets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70196,"src":"5093:7:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70305,"indexExpression":{"id":70304,"name":"j","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70293,"src":"5101:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"5093:10:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"baseExpression":{"id":70306,"name":"capacities","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70199,"src":"5107:10:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70308,"indexExpression":{"id":70307,"name":"j","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70293,"src":"5118:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"5107:13:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5093:27:126","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":70322,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70316,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"baseExpression":{"id":70312,"name":"buckets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70196,"src":"5175:7:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70314,"indexExpression":{"id":70313,"name":"j","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70293,"src":"5183:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"5175:10:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":70315,"name":"bestCandidateAllocation","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70212,"src":"5188:23:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5175:36:126","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"&&","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70321,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"baseExpression":{"id":70317,"name":"buckets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70196,"src":"5215:7:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70319,"indexExpression":{"id":70318,"name":"j","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70293,"src":"5223:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"5215:10:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":70320,"name":"allocationSizeUpperBound","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70289,"src":"5228:24:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5215:37:126","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"5175:77:126","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":70330,"nodeType":"IfStatement","src":"5171:155:126","trueBody":{"id":70329,"nodeType":"Block","src":"5254:72:126","statements":[{"expression":{"id":70327,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":70323,"name":"allocationSizeUpperBound","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70289,"src":"5273:24:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"baseExpression":{"id":70324,"name":"buckets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70196,"src":"5300:7:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70326,"indexExpression":{"id":70325,"name":"j","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70293,"src":"5308:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"5300:10:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5273:37:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70328,"nodeType":"ExpressionStatement","src":"5273:37:126"}]}},"id":70331,"nodeType":"IfStatement","src":"5089:237:126","trueBody":{"id":70311,"nodeType":"Block","src":"5122:43:126","statements":[{"id":70310,"nodeType":"Continue","src":"5141:8:126"}]}}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70299,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":70296,"name":"j","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70293,"src":"5049:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"expression":{"id":70297,"name":"buckets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70196,"src":"5053:7:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70298,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5061:6:126","memberName":"length","nodeType":"MemberAccess","src":"5053:14:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5049:18:126","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":70333,"initializationExpression":{"assignments":[70293],"declarations":[{"constant":false,"id":70293,"mutability":"mutable","name":"j","nameLocation":"5042:1:126","nodeType":"VariableDeclaration","scope":70333,"src":"5034:9:126","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70292,"name":"uint256","nodeType":"ElementaryTypeName","src":"5034:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":70295,"initialValue":{"hexValue":"30","id":70294,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5046:1:126","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"5034:13:126"},"isSimpleCounterLoop":true,"loopExpression":{"expression":{"id":70301,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"++","prefix":true,"src":"5069:3:126","subExpression":{"id":70300,"name":"j","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70293,"src":"5071:1:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70302,"nodeType":"ExpressionStatement","src":"5069:3:126"},"nodeType":"ForStatement","src":"5029:308:126"},{"expression":{"id":70357,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":70334,"name":"allocated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70204,"src":"5349:9:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70339,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":70337,"name":"bestCandidatesCount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70216,"src":"5387:19:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"31","id":70338,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5409:1:126","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"5387:23:126","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"id":70345,"name":"allocationSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70201,"src":"5468:14:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70346,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"5387:95:126","trueExpression":{"arguments":[{"id":70342,"name":"allocationSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70201,"src":"5429:14:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":70343,"name":"bestCandidatesCount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70216,"src":"5445:19:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":70340,"name":"Math256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":69790,"src":"5413:7:126","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Math256_$69790_$","typeString":"type(library Math256)"}},"id":70341,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5421:7:126","memberName":"ceilDiv","nodeType":"MemberAccess","referencedDeclaration":69767,"src":"5413:15:126","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":70344,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5413:52:126","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":70355,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":70349,"name":"allocationSizeUpperBound","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70289,"src":"5509:24:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"baseExpression":{"id":70350,"name":"capacities","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70199,"src":"5535:10:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70352,"indexExpression":{"id":70351,"name":"bestCandidateIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70207,"src":"5546:18:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"5535:30:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":70347,"name":"Math256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":69790,"src":"5497:7:126","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Math256_$69790_$","typeString":"type(library Math256)"}},"id":70348,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5505:3:126","memberName":"min","nodeType":"MemberAccess","referencedDeclaration":69706,"src":"5497:11:126","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":70353,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5497:69:126","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":70354,"name":"bestCandidateAllocation","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70212,"src":"5569:23:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5497:95:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":70335,"name":"Math256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":69790,"src":"5361:7:126","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Math256_$69790_$","typeString":"type(library Math256)"}},"id":70336,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5369:3:126","memberName":"min","nodeType":"MemberAccess","referencedDeclaration":69706,"src":"5361:11:126","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":70356,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5361:242:126","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5349:254:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70358,"nodeType":"ExpressionStatement","src":"5349:254:126"},{"expression":{"id":70363,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"id":70359,"name":"buckets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70196,"src":"5614:7:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":70361,"indexExpression":{"id":70360,"name":"bestCandidateIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70207,"src":"5622:18:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"5614:27:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":70362,"name":"allocated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70204,"src":"5645:9:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5614:40:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70364,"nodeType":"ExpressionStatement","src":"5614:40:126"}]},"documentation":{"id":70193,"nodeType":"StructuredDocumentation","src":"2499:1407:126","text":"@notice Allocates the max allowed value not exceeding allocationSize to the bucket with the least value.\n     The candidate search happens according to the following algorithm:\n         1. Find the first least filled bucket which has free space. Count the number of such buckets.\n         2. If no buckets are found terminate the search - no free buckets\n         3. Find the first bucket with free space, which has the least value greater\n             than the bucket found in step 1. To preserve proportional allocation the resulting allocation can't exceed this value.\n         4. Calculate the allocation size as:\n             min(\n                 (count of least filling buckets > 1 ? ceilDiv(allocationSize, count of least filling buckets) : allocationSize),\n                 fill factor of the bucket found in step 3,\n                 free space of the least filled bucket\n             )\n @dev Method modifies the passed buckets array to reduce the gas costs on memory allocation.\n @param buckets The array of current allocations in the buckets\n @param capacities The array of capacities of the buckets\n @param allocationSize The desired value to allocate to the bucket\n @return allocated The total value allocated to the bucket. Can't exceed the allocationSize value"},"implemented":true,"kind":"function","modifiers":[],"name":"allocateToBestCandidate","nameLocation":"3921:23:126","parameters":{"id":70202,"nodeType":"ParameterList","parameters":[{"constant":false,"id":70196,"mutability":"mutable","name":"buckets","nameLocation":"3972:7:126","nodeType":"VariableDeclaration","scope":70366,"src":"3955:24:126","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[]"},"typeName":{"baseType":{"id":70194,"name":"uint256","nodeType":"ElementaryTypeName","src":"3955:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70195,"nodeType":"ArrayTypeName","src":"3955:9:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_storage_ptr","typeString":"uint256[]"}},"visibility":"internal"},{"constant":false,"id":70199,"mutability":"mutable","name":"capacities","nameLocation":"4007:10:126","nodeType":"VariableDeclaration","scope":70366,"src":"3990:27:126","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[]"},"typeName":{"baseType":{"id":70197,"name":"uint256","nodeType":"ElementaryTypeName","src":"3990:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":70198,"nodeType":"ArrayTypeName","src":"3990:9:126","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_storage_ptr","typeString":"uint256[]"}},"visibility":"internal"},{"constant":false,"id":70201,"mutability":"mutable","name":"allocationSize","nameLocation":"4036:14:126","nodeType":"VariableDeclaration","scope":70366,"src":"4028:22:126","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70200,"name":"uint256","nodeType":"ElementaryTypeName","src":"4028:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"3944:113:126"},"returnParameters":{"id":70205,"nodeType":"ParameterList","parameters":[{"constant":false,"id":70204,"mutability":"mutable","name":"allocated","nameLocation":"4089:9:126","nodeType":"VariableDeclaration","scope":70366,"src":"4081:17:126","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":70203,"name":"uint256","nodeType":"ElementaryTypeName","src":"4081:7:126","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"4080:19:126"},"scope":70367,"stateMutability":"pure","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[],"canonicalName":"MinFirstAllocationStrategy","contractDependencies":[],"contractKind":"library","documentation":{"id":70141,"nodeType":"StructuredDocumentation","src":"200:222:126","text":"@notice Library with methods to calculate \"proportional\" allocations among buckets with different\n     capacity and level of filling.\n @dev The current implementation favors buckets with the least fill factor"},"fullyImplemented":true,"linearizedBaseContracts":[70367],"name":"MinFirstAllocationStrategy","nameLocation":"430:26:126","scope":70368,"usedErrors":[],"usedEvents":[]}],"license":"GPL-3.0"},"id":126}